### tests rpc-upgrades to <scenario> leaped from <action>
- project:
    name: "rpc-upgrades-aio-newton-head-pr"
    repo_name: "rpc-upgrades"
    repo_url: "https://github.com/rcbops/rpc-upgrades"
    branches:
     - "master"
    skip_pattern: |
      \.md$
      | \.rst$
      | ^releasenotes/
      | ^gating/generate_release_notes/
      | ^gating/periodic/
      | ^gating/release/
    image:
      - trusty_aio:
          SLAVE_TYPE: "nodepool-rpco-14.2-trusty-base"
    scenario:
      - "swift"
    action:
      - "mitaka_to_newton_leap"
      - "liberty_to_newton_leap"
      - "kilo_to_newton_leap"
    jira_project_key: "RLM"
    jobs:
      - 'PR_{repo_name}-{series}-{image}-{scenario}-{action}'

- project:
    name: "rpc-upgrades-aio-tox-pr"
    repo_name: "rpc-upgrades"
    repo_url: "https://github.com/rcbops/rpc-upgrades"
    branches:
     - "master"
    skip_pattern: |
      \.md$
      | \.rst$
      | ^releasenotes/
      | ^gating/generate_release_notes/
      | ^gating/periodic/
      | ^gating/release/
    image:
      - container:
          SLAVE_TYPE: "container"
    scenario:
      - "ansible-lint"
      - "ansible-syntax"
      - "bashate"
      - "pep8"
      - "releasenotes"
      - "docs"
    action:
      - "tox-test"
    jira_project_key: "RLM"
    jobs:
      - 'PR_{repo_name}-{series}-{image}-{scenario}-{action}'

- project:
    name: "rpc-upgrades-aio-newton-head-release"
    repo_name: "rpc-upgrades"
    repo_url: "https://github.com/rcbops/rpc-upgrades"
    branch: "master"
    image:
      - trusty_aio:
          SLAVE_TYPE: "nodepool-rpco-14.2-trusty-base"
    scenario:
      - "swift"
    action:
      - "mitaka_to_newton_leap"
      - "liberty_to_newton_leap"
    jira_project_key: "RLM"
    jobs:
      - 'RELEASE_{repo_name}-{branch}-{image}-{scenario}-{action}'

- project:
    name: "rpc-upgrades-aio-newton-head-pm"
    repo_name: "rpc-upgrades"
    repo_url: "https://github.com/rcbops/rpc-upgrades"
    # NOTE(mattt): ORD doesn't have the custom RPC images in it
    REGIONS: "DFW"
    FALLBACK_REGIONS: "IAD"
    image:
      - trusty_aio:
          FLAVOR: "performance2-15"
          IMAGE: "Ubuntu 14.04.5 LTS prepared for RPC deployment"
    scenario:
      - "swift"
    action:
      - "kilo_to_newton_leap"
      - "liberty_to_newton_leap"
      - "mitaka_to_newton_leap"
    jira_project_key: "RLM"
    jobs:
      - 'PM_{repo_name}-{branch}-{image}-{scenario}-{action}'
    CRON: "@weekly"

- project:
    name: "rpc-upgrades-aio-newton-head-pm-minor"
    repo_name: "rpc-upgrades"
    repo_url: "https://github.com/rcbops/rpc-upgrades"
    # NOTE(mattt): ORD doesn't have the custom RPC images in it
    REGIONS: "DFW"
    FALLBACK_REGIONS: "IAD"
    image:
      - xenial_aio:
          FLAVOR: "performance2-15"
          IMAGE: "Ubuntu 16.04.2 LTS prepared for RPC deployment"
    scenario:
      - "swift"
    action:
      - "r14.15.0_to_newton_minor"
      - "r16.0.0_to_pike_minor"
      - "r17.0.0_to_queens_minor"
    jira_project_key: "RLM"
    jobs:
      - 'PM_{repo_name}-{branch}-{image}-{scenario}-{action}'
    CRON: "@weekly"

- project:
    name: "rpc-upgrades-aio-newton-release-pm"
    repo_name: "rpc-upgrades"
    repo_url: "https://github.com/rcbops/rpc-upgrades"
    # NOTE(mattt): ORD doesn't have the custom RPC images in it
    REGIONS: "DFW"
    FALLBACK_REGIONS: "IAD"
    image:
      - trusty_aio:
          FLAVOR: "performance2-15"
          IMAGE: "Ubuntu 14.04.5 LTS prepared for RPC deployment"
    scenario:
      - "swift"
    action:
      - "mitaka_to_r14.current_leap"
      - "r13.0.0_to_r14.current_leap"
      - "r13.0.2_to_r14.current_leap"
      - "r13.1.2_to_r14.current_leap"
      - "r13.1.3_to_r14.current_leap"
      - "r13.1.4_to_r14.current_leap"
      - "liberty_to_r14.current_leap"
      - "r12.1.2_to_r14.current_leap"
      - "r12.2.2_to_r14.current_leap"
      - "r12.2.5_to_r14.current_leap"
      - "r12.2.8_to_r14.current_leap"
      - "kilo_to_r14.current_leap"
      - "r11.0.0_to_r14.current_leap"
      - "r11.0.1_to_r14.current_leap"
      - "r11.0.4_to_r14.current_leap"
      - "r11.1.3_to_r14.current_leap"
      - "r11.1.4_to_r14.current_leap"
      - "r11.1.5_to_r14.current_leap"
      - "r11.1.6_to_r14.current_leap"
      - "r11.1.9_to_r14.current_leap"
      - "r11.1.10_to_r14.current_leap"
      - "r11.1.15_to_r14.current_leap"
      - "r11.1.18_to_r14.current_leap"
    jira_project_key: "RLM"
    jobs:
      - 'PM_{repo_name}-{branch}-{image}-{scenario}-{action}'
    CRON: "@weekly"

- project:
    name: "rpc-upgrades-mnaio-newton-head-pm"
    repo_name: "rpc-upgrades"
    repo_url: "https://github.com/rcbops/rpc-upgrades"
    image:
      # in mnaio builds, the OS equals the VMs OS
      - trusty_mnaio:
          FLAVOR: "onmetal-io2"
          IMAGE: "OnMetal - Ubuntu 16.04 LTS (Xenial Xerus)"
          REGIONS: "IAD"
          FALLBACK_REGIONS: "DFW"
    scenario:
      - "swift"
    action:
      - "mitaka_to_newton_leap"
      - "liberty_to_newton_leap"
      - "kilo_to_newton_leap"
      - "liberty_to_newton_leap_system"
    jira_project_key: "RLM"
    # Required by RPC-ASC team to upload test results qTest
    credentials: "rpc_asc_creds"
    jobs:
      - 'PM_{repo_name}-{branch}-{image}-{scenario}-{action}'
    CRON: "@weekly"

- project:
    name: "rpc-upgrades-mnaio-newton-release-pm"
    repo_name: "rpc-upgrades"
    repo_url: "https://github.com/rcbops/rpc-upgrades"
    image:
      # in mnaio builds, the OS equals the VMs OS
      - trusty_mnaio:
          FLAVOR: "onmetal-io2"
          IMAGE: "OnMetal - Ubuntu 16.04 LTS (Xenial Xerus)"
          REGIONS: "IAD"
          FALLBACK_REGIONS: "DFW"
    scenario:
      - "swift"
    action:
      - "mitaka_to_r14.current_leap"
      - "r13.0.0_to_r14.current_leap"
      - "r13.0.2_to_r14.current_leap"
      - "r13.1.2_to_r14.current_leap"
      - "r13.1.3_to_r14.current_leap"
      - "r13.1.4_to.r14.current_leap"
      - "liberty_to_r14.current_leap"
      - "r12.2.8_to_r14.current_leap"
      - "r12.2.5_to_r14.current_leap"
      - "r12.2.2_to_r14.current_leap"
      - "r12.1.2_to_r14.current_leap"
      - "kilo_to_r14.current_leap"
      - "liberty_to_r14.current_leap_system"
    jira_project_key: "RLM"
    # Required by RPC-ASC team to upload test results qTest
    credentials: "rpc_asc_creds"
    jobs:
      - 'PM_{repo_name}-{branch}-{image}-{scenario}-{action}'
    CRON: "@weekly"

- project:
    name: "rpc-upgrades-aio-newton-head-incremental"
    repo_name: "rpc-upgrades"
    repo_url: "https://github.com/rcbops/rpc-upgrades"
    # NOTE(mattt): ORD doesn't have the custom RPC images in it
    REGIONS: "DFW"
    FALLBACK_REGIONS: "IAD"
    image:
      - xenial_aio:
          FLAVOR: "performance2-15"
          IMAGE: "Ubuntu 16.04.2 LTS prepared for RPC deployment"
    scenario:
      - "swift"
    action:
      - "newton_to_queens_incremental"
    jira_project_key: "RLM"
    jobs:
      - 'PM_{repo_name}-{branch}-{image}-{scenario}-{action}'
    CRON: "@weekly"

- project:
    name: "rpc-upgrades"
    repo_name: "rpc-upgrades"
    repo_url: "https://github.com/rcbops/rpc-upgrades"

    jobs:
      - 'Component-Gate-Trigger_{repo_name}'
