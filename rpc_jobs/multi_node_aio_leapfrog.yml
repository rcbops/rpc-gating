- project:
    name: 'Multi-Node-AIO-Leapfrog-Testing'
    series:
      - newton-r11.1.18:
          UPGRADE_FROM_REF: "r11.1.18"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
      - newton-r11.1.15:
          UPGRADE_FROM_REF: "r11.1.15"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
      - newton-r11.1.14:
          UPGRADE_FROM_REF: "r11.1.14"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
      - newton-r11.1.10:
          UPGRADE_FROM_REF: "r11.1.10"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
      - newton-r11.1.9:
          UPGRADE_FROM_REF: "r11.1.9"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
      - newton-r11.1.6:
          UPGRADE_FROM_REF: "r11.1.6"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
      - newton-r11.1.5:
          UPGRADE_FROM_REF: "r11.1.5"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
      - newton-r11.1.4:
          UPGRADE_FROM_REF: "r11.1.4"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
      - newton-r11.1.3:
          UPGRADE_FROM_REF: "r11.1.3"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
      - newton-r11.0.4:
          UPGRADE_FROM_REF: "r11.0.4"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
      - newton-r11.0.1:
          UPGRADE_FROM_REF: "r11.0.1"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
      - newton-r11.0.0:
          UPGRADE_FROM_REF: "r11.0.0"
          branch: "r14.2.0"
          branches: "r14.2.0"
          KIBANA_SELENIUM_BRANCH: "newton"
          SERIES_USER_VARS: |
            tempest_test_sets: 'all'
            lxc_container_vg_name: "USE_DIR_NOT_VG"
            glance_default_store: "swift"
            neutron_legacy_ha_tool_enabled: true
          DEPLOY_TELEGRAF: "yes"
    image:
      - trusty:
          DEFAULT_IMAGE: "14.04.5"
    action:
      - leapfrogupgrade:
          DEFAULT_STAGES: >-
            Allocate Resources,
            Connect Slave,
            Prepare Multi-Node AIO,
            Prepare RPC Configs,
            Prepare Lifecycle,
            Deploy RPC w/ Script,
            Cleanup,
            Destroy Slave
          ACTION_STAGES: >-
            Prepare MaaS,
            Install Tempest,
            Leapfrog Upgrade
    resources:
      - small:
          GENERATE_TEST_NETWORKS: "20"
          GENERATE_TEST_SERVERS: "20"
          GENERATE_TEST_VOLUMES: "8"
          COMPUTE_NODES: "2"
          VOLUME_NODES: "2"
    trigger:
      - periodic:
          CRON: "H H * * H/2"
    jobs:
      - 'OnMetal-Multi-Node-AIO_{series}-{image}-{action}-{resources}-{trigger}'
